<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Your Love - Ruhi</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore-compat.js"></script>

    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
</head>

<body>
    <div class="container" id="main-app" style="display: none;">
        <img class="goal-pic" src="Durefishan-Saleem-e1715333773869.png" alt="Ruhi's Picture" />
        <h1>Ruhi</h1>

        <!-- PDF Upload -->
        <label for="pdf-file" class="pdf-label">📄 Upload PDF</label>
        <input type="file" id="pdf-file" accept="application/pdf" onchange="readPDF()" />

        <!-- Chat Display -->
        <div id="chat-box"></div>

        <!-- User Input -->
        <textarea id="user-input" placeholder="Type your message here..." rows="3"></textarea>
        <button onclick="sendMessage()">Send</button>

        <!-- Functional Buttons -->
        <div class="buttons">
            <button onclick="downloadHistory()">💾 Save Chat</button>
            <button onclick="clearHistory()">🗑️ Clear Memory</button>
            <button onclick="logoutUser()">🚪 Logout</button>
        </div>

        <!-- About Developer -->
        <button class="about-btn" onclick="window.location.href='about.html'">👨‍💻 About Developer</button>
    </div>

    <script>
        // Firebase Config (already initialized in app.js normally)
        const firebaseConfig = {
            apiKey: "AIzaSyDcYStV0fEYx0zv9gD5qiK60tU_DaT10oA",
            authDomain: "ruhiai3.firebaseapp.com",
            projectId: "ruhiai3",
            storageBucket: "ruhiai3.firebasestorage.app",
            messagingSenderId: "822442687960",
            appId: "1:822442687960:web:ce726801678503a84586ad",
        };
        firebase.initializeApp(firebaseConfig);

        // Check auth status
        firebase.auth().onAuthStateChanged(user => {
            if (user) {
                // Show the main app
                document.getElementById('main-app').style.display = 'block';
            } else {
                // Redirect to login page
                window.location.href = 'login.html';
            }
        });
    </script>

    <!-- Main App Script -->
    <script src="app.js"></script>
</body>

</html>
